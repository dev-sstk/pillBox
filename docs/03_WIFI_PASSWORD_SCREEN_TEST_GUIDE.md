# Wi-Fi 비밀번호 화면 테스트 가이드

> **WifiPasswordScreen 테스트 및 사용법**

## 📋 개요

Wi-Fi 비밀번호 화면은 보안 네트워크에 연결하기 위해 비밀번호를 입력하는 화면입니다. LVGL 키보드를 사용하여 비밀번호를 입력하고 연결을 시도합니다.

## 🎯 주요 기능

- **LVGL 키보드**를 통한 비밀번호 입력
- **실시간 연결 시도** 및 상태 표시
- **연결 성공/실패** 처리
- **Modern UI 스타일** 적용
- **한글 폰트** 지원

## 🚀 테스트 방법

### 1. 개별 화면 테스트
```bash
# main.py 실행 후 메뉴에서 3번 선택
선택 (1-11): 3
```

### 2. 테스트 시나리오
1. **키보드 입력 테스트**
   - **A/B 버튼**: 키보드에서 위/아래 이동
   - **D 버튼**: 문자 입력
   - **C 버튼**: 완료/뒤로가기

2. **비밀번호 입력**
   - 키보드로 비밀번호 입력
   - 입력된 문자가 화면에 표시
   - 백스페이스로 문자 삭제

3. **연결 시도**
   - C 버튼으로 연결 시도
   - 연결 상태가 화면에 표시
   - 성공 시 복용 횟수 설정 화면으로 전환

## 🔧 화면 구성 요소

### UI 요소
- **제목**: "Wi-Fi 비밀번호 입력"
- **네트워크 정보**: 선택한 네트워크 SSID 표시
- **비밀번호 입력 필드**: 입력된 비밀번호 표시
- **LVGL 키보드**: 문자 입력용 키보드
- **버튼 힌트**: "A/B: 이동, D: 입력, C: 완료"

### 키보드 레이아웃
- **문자 키**: 영문, 숫자, 특수문자
- **백스페이스**: 문자 삭제
- **스페이스**: 공백 입력
- **완료**: 연결 시도

## 📱 화면 전환

### 연결 성공 시
- **조건**: 올바른 비밀번호 입력 후 연결 성공
- **대상**: 복용 횟수 설정 화면 (`dose_count`)
- **방법**: `_on_connection_success()` 호출

### 연결 실패 시
- **조건**: 잘못된 비밀번호 또는 연결 실패
- **대상**: 현재 화면 유지
- **방법**: 에러 메시지 표시 후 재입력

### 뒤로가기
- **조건**: C 버튼으로 뒤로가기
- **대상**: Wi-Fi 스캔 화면 (`wifi_scan`)
- **방법**: `_go_back()` 호출

## 🔧 버튼 조작

### A 버튼
- **기능**: 키보드에서 위로 이동
- **동작**: 이전 행의 키로 이동

### B 버튼
- **기능**: 키보드에서 아래로 이동
- **동작**: 다음 행의 키로 이동

### C 버튼
- **기능**: 완료/뒤로가기
- **동작**: 
  - 비밀번호 입력 중: 연결 시도
  - 에러 상태: 뒤로가기

### D 버튼
- **기능**: 문자 입력
- **동작**: 선택한 키의 문자 입력

## 🔐 비밀번호 입력 로직

### 입력 과정
1. **키보드 네비게이션**: A/B 버튼으로 키 선택
2. **문자 입력**: D 버튼으로 문자 입력
3. **비밀번호 표시**: 입력된 문자를 화면에 표시
4. **연결 시도**: C 버튼으로 연결 시도

### 보안 처리
- **비밀번호 마스킹**: 입력 시 '*' 표시
- **입력 길이 제한**: 최대 길이 설정
- **특수문자 지원**: 다양한 문자 입력 가능

## 🌐 Wi-Fi 연결 로직

### 연결 과정
1. **비밀번호 검증**: 입력된 비밀번호 확인
2. **연결 시도**: `wifi_manager.connect()` 호출
3. **상태 모니터링**: 연결 상태 실시간 확인
4. **결과 처리**: 성공/실패에 따른 화면 전환

### 연결 상태
- **연결 중**: "연결 중..." 메시지 표시
- **연결 성공**: "연결 성공!" 메시지 후 화면 전환
- **연결 실패**: "연결 실패" 메시지 후 재입력


## 📊 성능 최적화

### 메모리 관리
- **키보드 리소스**: 필요 시에만 생성
- **입력 버퍼**: 적절한 크기로 제한
- **가비지 컬렉션**: 연결 시도 후 메모리 정리

### 입력 최적화
- **키보드 레이아웃**: 사용자 친화적 배치
- **입력 반응성**: 빠른 입력 처리
- **에러 처리**: 명확한 에러 메시지

## 🔗 관련 파일

- **`screens/wifi_password_screen.py`**: Wi-Fi 비밀번호 화면 구현
- **`wifi_manager.py`**: Wi-Fi 연결 관리
- **`main.py`**: 테스트 시스템
- **`screen_manager.py`**: 화면 전환 관리

## 📝 개발 노트

### 최근 변경사항
- **LVGL 키보드**: 표준 키보드 위젯 사용
- **입력 검증**: 비밀번호 형식 확인
- **연결 상태**: 실시간 상태 표시

### 향후 개선 계획
- **비밀번호 표시/숨김**: 토글 기능 추가
- **자동 완성**: 이전 연결 기록 활용
- **연결 품질**: 신호 강도 표시
